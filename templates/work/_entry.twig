{% extends "_layouts/main" %}

{% block main %}

<div class="border-top border-bottom overflow-hidden">

	<header class="container narrow display-none">

		<h1 class="banner-headline margin-y-4">
			{{ entry.title }}
		</h1>

	</header>

	<div class="container medium">

		{% for image in entry.workImage.all() %}
			<img class="display-none" src="{{ image.getUrl() }}" alt="{{ entry.title }}" id="work-image">
		{% endfor %}
		
		<div class="workCanvas">

			<div class="workCanvas__display" id="openseadragon"></div>

			<div class="workCanvas__toolbar" id="toolbarDiv">

				<div class="button-group font-size-md">
					<button class="button button--icon-only" aria-label="Zoom In" id="zoom-in">
						<span class="nyc_icon_plus" aria-hidden="true"></span>
					</button>
					<button class="button button--icon-only" aria-label="Zoom Out" id="zoom-out">
						<span class="nyc_icon_minus" aria-hidden="true"></span>
					</button>
					<button class="button button--icon-only" aria-label="Original Size" id="home">
						<span class="nyc_icon_shrink" aria-hidden="true"></span>
					</button>
					<button class="button button--outline" id="full-page">
						Full Screen
					</button>
				</div>
				
			</div>
		
		</div>

	</div>

</div>

{% endblock %}

{# Register OpenSeadragon #}

{% js "https://cdn.jsdelivr.net/npm/openseadragon@2.4/build/openseadragon/openseadragon.min.js" %}

{% js %}

	const coolURL = document.getElementById("work-image").src;

	console.log(coolURL);

	var viewer = OpenSeadragon({

		id: "openseadragon",
		toolbar:       "toolbarDiv",
		zoomInButton:   "zoom-in",
		zoomOutButton:  "zoom-out",
		homeButton:     "home",
		fullPageButton: "full-page",
		nextButton:     "next",
		previousButton: "previous",

		tileSources:   {
			type: 'image',
			url:  coolURL
		}
	});

{% endjs %}
